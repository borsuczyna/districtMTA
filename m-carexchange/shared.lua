partNames = {
	[1000] = "Pro",
	[1001] = "Win",
	[1002] = "Drag",
	[1003] = "Alpha",
	[1004] = "Champ Scoop",
	[1005] = "Fury Scoop",
	[1006] = "Roof Scoop",
	[1007] = "Right Sideskirt",
	[1008] = "Nitro 5 times",
	[1009] = "Nitro 2 times",
	[1010] = "Nitro 10 times",
	[1011] = "Race Scoop",
	[1012] = "Worx Scoop",
	[1013] = "Round Fog",
	[1014] = "Champ",
	[1015] = "Race",
	[1016] = "Worx",
	[1017] = "Left Sideskirt",
	[1018] = "Upswept",
	[1019] = "Twin",
	[1020] = "Large",
	[1021] = "Medium",
	[1022] = "Small",
	[1023] = "Fury",
	[1024] = "Square Fog",
	[1025] = "Offroad",
	[1026] = "Right Alien Sideskirt",
	[1027] = "Left Alien Sideskirt",
	[1028] = "Alien",
	[1029] = "X-Flow",
	[1030] = "Left X-Flow Sideskirt",
	[1031] = "Right X-Flow Sideskirt",
	[1032] = "Alien Roof Vent",
	[1033] = "X-Flow Roof Vent",
	[1034] = "Alien",
	[1035] = "X-Flow Roof Vent",
	[1036] = "Right Alien Sideskirt",
	[1037] = "X-Flow",
	[1038] = "Alien Roof Vent",
	[1039] = "Left X-Flow Sideskirt",
	[1040] = "Left Alien Sideskirt",
	[1041] = "Right X-Flow Sideskirt",
	[1042] = "Right Chrome Sideskirt",
	[1043] = "Slamin",
	[1044] = "Chrome",
	[1045] = "X-Flow",
	[1046] = "Alien",
	[1047] = "Right Alien Sideskirt",
	[1048] = "Right X-Flow Sideskirt",
	[1049] = "Alien",
	[1050] = "X-Flow",
	[1051] = "Left Alien Sideskirt",
	[1052] = "Left X-Flow Sideskirt",
	[1053] = "X-Flow",
	[1054] = "Alien",
	[1055] = "Alien",
	[1056] = "Right Alien Sideskirt",
	[1057] = "Right X-Flow Sideskirt",
	[1058] = "Alien",
	[1059] = "X-Flow",
	[1060] = "X-Flow",
	[1061] = "X-Flow",
	[1062] = "Left Alien Sideskirt",
	[1063] = "Left X-Flow Sideskirt",
	[1064] = "Alien",
	[1065] = "Alien",
	[1066] = "X-Flow",
	[1067] = "Alien",
	[1068] = "X-Flow",
	[1069] = "Right Alien Sideskirt",
	[1070] = "Right X-Flow Sideskirt",
	[1071] = "Left Alien Sideskirt",
	[1072] = "Left X-Flow Sideskirt",
	[1073] = "Shadow",
	[1074] = "Mega",
	[1075] = "Rimshine",
	[1076] = "Wires",
	[1077] = "Classic",
	[1078] = "Twist",
	[1079] = "Cutter",
	[1080] = "Switch",
	[1081] = "Grove",
	[1082] = "Import",
	[1083] = "Dollar",
	[1084] = "Trance",
	[1085] = "Atomic",
	[1086] = "Stereo",
	[1087] = "Hydraulics",
	[1088] = "Alien",
	[1089] = "X-Flow",
	[1090] = "Right Alien Sideskirt",
	[1091] = "X-Flow",
	[1092] = "Alien",
	[1093] = "Right X-Flow Sideskirt",
	[1094] = "Left Alien Sideskirt",
	[1095] = "Right X-Flow Sideskirt",
	[1096] = "Ahab",
	[1097] = "Virtual",
	[1098] = "Access",
	[1099] = "Left Chrome Sideskirt",
	[1100] = "Chrome Grill",
	[1101] = "Left `Chrome Flames` Sideskirt",
	[1102] = "Left `Chrome Strip` Sideskirt",
	[1103] = "Covertible",
	[1104] = "Chrome",
	[1105] = "Slamin",
	[1106] = "Right `Chrome Arches`",
	[1107] = "Left `Chrome Strip` Sideskirt",
	[1108] = "Right `Chrome Strip` Sideskirt",
	[1109] = "Chrome",
	[1110] = "Slamin",
	[1111] = "Little Sign?",
	[1112] = "Little Sign?",
	[1113] = "Chrome",
	[1114] = "Slamin",
	[1115] = "Chrome",
	[1116] = "Slamin",
	[1117] = "Chrome",
	[1118] = "Right `Chrome Trim` Sideskirt",
	[1119] = "Right `Wheelcovers` Sideskirt",
	[1120] = "Left `Chrome Trim` Sideskirt",
	[1121] = "Left `Wheelcovers` Sideskirt",
	[1122] = "Right `Chrome Flames` Sideskirt",
	[1123] = "Bullbar Chrome Bars",
	[1124] = "Left `Chrome Arches` Sideskirt",
	[1125] = "Bullbar Chrome Lights",
	[1126] = "Chrome Exhaust",
	[1127] = "Slamin Exhaust",
	[1128] = "Vinyl Hardtop",
	[1129] = "Chrome",
	[1130] = "Hardtop",
	[1131] = "Softtop",
	[1132] = "Slamin",
	[1133] = "Right `Chrome Strip` Sideskirt",
	[1134] = "Right `Chrome Strip` Sideskirt",
	[1135] = "Slamin",
	[1136] = "Chrome",
	[1137] = "Left `Chrome Strip` Sideskirt",
	[1138] = "Alien",
	[1139] = "X-Flow",
	[1140] = "X-Flow",
	[1141] = "Alien",
	[1142] = "Left Oval Hoods",
	[1143] = "Right Oval Hoods",
	[1144] = "Left Square Hoods",
	[1145] = "Right Square Hoods",
	[1146] = "X-Flow",
	[1147] = "Alien",
	[1148] = "X-Flow",
	[1149] = "Alien",
	[1150] = "Alien",
	[1151] = "X-Flow",
	[1152] = "X-Flow",
	[1153] = "Alien",
	[1154] = "Alien",
	[1155] = "Alien",
	[1156] = "X-Flow",
	[1157] = "X-Flow",
	[1158] = "X-Flow",
	[1159] = "Alien",
	[1160] = "Alien",
	[1161] = "X-Flow",
	[1162] = "Alien",
	[1163] = "X-Flow",
	[1164] = "Alien",
	[1165] = "X-Flow",
	[1166] = "Alien",
	[1167] = "X-Flow",
	[1168] = "Alien",
	[1169] = "Alien",
	[1170] = "X-Flow",
	[1171] = "Alien",
	[1172] = "X-Flow",
	[1173] = "X-Flow",
	[1174] = "Chrome",
	[1175] = "Slamin",
	[1176] = "Chrome",
	[1177] = "Slamin",
	[1178] = "Slamin",
	[1179] = "Chrome",
	[1180] = "Chrome",
	[1181] = "Slamin",
	[1182] = "Chrome",
	[1183] = "Slamin",
	[1184] = "Chrome",
	[1185] = "Slamin",
	[1186] = "Slamin",
	[1187] = "Chrome",
	[1188] = "Slamin",
	[1189] = "Chrome",
	[1190] = "Slamin",
	[1191] = "Chrome",
	[1192] = "Chrome",
	[1193] = "Slamin",
}

local modelSizeCache = {}

function getPartName(partID)
    return partNames[partID] or "?"
end

function getModelBoundingBox(element)
	local type = getElementType(element)
	local model = getElementModel(element)
	local element;

	if type == "vehicle" then
		element = createVehicle(model, 0, 0, 0)
	elseif type == "object" then
		element = createObject(model, 0, 0, 0)
	else
		return false
	end

	local x1, y1, z1, x2, y2, z2 = getElementBoundingBox(element)
	destroyElement(element)

	return x1, y1, z1, x2, y2, z2
end

function getElementSize(element)
	if modelSizeCache[element] then
		return unpack(modelSizeCache[element])
	end

	local x1, y1, z1, x2, y2, z2 = getModelBoundingBox(element)
	if not x1 then return end

	modelSizeCache[element] = {x2 - x1, y2 - y1, z2 - z1}
	return unpack(modelSizeCache[element])
end

function getPositionFromElementOffset(element,offX,offY,offZ)
    local m = getElementMatrix ( element )  -- Get the matrix
    local x = offX * m[1][1] + offY * m[2][1] + offZ * m[3][1] + m[4][1]  -- Apply transform
    local y = offX * m[1][2] + offY * m[2][2] + offZ * m[3][2] + m[4][2]
    local z = offX * m[1][3] + offY * m[2][3] + offZ * m[3][3] + m[4][3]
    return x, y, z                               -- Return the transformed point
end

function dxDrawRoundedRectangle(x, y, rx, ry, color, radius)
    rx = rx - radius * 2
    ry = ry - radius * 2
    x = x + radius
    y = y + radius

    if (rx >= 0) and (ry >= 0) then
        dxDrawRectangle(x, y, rx, ry, color)
        dxDrawRectangle(x, y - radius, rx, radius, color)
        dxDrawRectangle(x, y + ry, rx, radius, color)
        dxDrawRectangle(x - radius, y, radius, ry, color)
        dxDrawRectangle(x + rx, y, radius, ry, color)

        dxDrawCircle(x, y, radius, 180, 270, color, color, 7)
        dxDrawCircle(x + rx, y, radius, 270, 360, color, color, 7)
        dxDrawCircle(x + rx, y + ry, radius, 0, 90, color, color, 7)
        dxDrawCircle(x, y + ry, radius, 90, 180, color, color, 7)
    end
end

function getVehicleTuning(vehicle)
    local tuning = {}
    
    for i = 0, 16 do
        local value = getVehicleUpgradeOnSlot(vehicle, i)
        if value and value ~= 0 then
            table.insert(tuning, getPartName(value))
        end
    end

    return tuning
end

function rgbToHex(r, g, b)
	return string.format("#%.2X%.2X%.2X", r, g, b)
end

function formatNumber(number)
    local formatted = number
    while true do  
        formatted, k = string.gsub(formatted, '^(-?%d+)(%d%d%d)', '%1,%2')
        if (k==0) then
            break
        end
    end
    return formatted
end